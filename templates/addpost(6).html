{% extends "header.html" %}
<head>
    <script src="../static/js/jquery-1.11.2.js"></script>

<script src="../static/js/jquery.ui.widget.js"></script>
 
<script type="text/javascript" src="../static/js/jquery.fileupload.js"></script>
 
<script type="text/javascript" src="../static/js/jquery.fileupload-process.js"></script>
 
<script type="text/javascript" src="../static/js/jquery.fileupload-ui.js"></script>
        <script>
        $(function(){
                $('#fileupload').fileupload({
                    url: '/upload',
                    dataType: 'json',
                    add: function (e, data) {
                        data.submit();
                    },
                    success:function(response,status) {
                    console.log(response.filename);
                    var filePath = 'static/uploads/' + response.filename;
                    $('#imgUpload').attr('src',filePath);
                    $('#filePath').val(filePath);
                        console.log('success');
                    },
                    error:function(error){
                        console.log(error);
                    }
                });
        })
        </script>
    <style>
    .btn-file {
    position: relative;
    overflow: hidden;
}
.btn-file input[type=file] {
    position: absolute;
    top: 0;
    right: 0;
    min-width: 100%;
    min-height: 100%;
    font-size: 100px;
    text-align: right;
    filter: alpha(opacity=0);
    opacity: 0;
    outline: none;
    background: white;
    cursor: inherit;
    display: block;
}
    </style>

</head>

{% block body %}

<body>

    <div class = "container">
        <h4>Add post</h4>
        <br>
        {% from "_formhelpers.html" import render_field %}
        <form method=post action="/addpost/">
            <dl>
                {{render_field(form.post_title)}}
                {{render_field(form.post_text)}}
            </dl>
             <p><input type=submit value=Submit></p>
        </form>
        </div>
<div class="input-group">
                <span class="input-group-btn">
                    <span class="btn btn-primary btn-file">
                        Browse&hellip; <input type="file" id="fileupload" name="filename" multiple>
                    </span>
                </span>
        <div class="pull-right">
                <img  id="imgUpload" style="width: 140px; height: 140px;" class="img-thumbnail"><input type="hidden" name="filePath" id="filePath"></input>
        </div>
            </div>

</body>

{% endblock %}





